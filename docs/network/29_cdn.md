# CDN

## 简介

来自[wiki](https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF)  
内容分发网络（Content Delivery Network/Content Distribution Network）:
用最靠近（一般指物理上距离）用户的服务器，更快、更可靠地把内容发送给用户，以提高用户体验

## 大致流程

参考[关于 cdn、回源等问题一网打尽](https://juejin.im/post/5af46498f265da0b8d41f6a3)  
类似小卖部（CDN 系统）、生产商（服务器）和顾客（客户端）之间的关系

1. 访问域名(`www.baidu.com`)的时候，拿到对应的负载均衡系统的 ip
2. 负载均衡系统进行根据客户端的 ip 和请求内容判断出最合适的缓存服务器地址
   - 如果缓存服务器上有对应的内容，直接返回  
     (比如百度首页的二维码图片地址是`https://ss1.bdstatic.com/xxx.png`)
   - 没有(比如没有资源，资源过期)  
     那么请求上一级缓存；如果一直往上都没有，那么访问服务器地址(`www.baidu.com`)
3. 服务器返回对应的 ip 给负载均衡系统
4. 负载均衡系统返回缓存服务器的地址
5. 客户端拿到地址后请求缓存服务器

## 适用场景

频繁访问，但不会频繁更新的静态资源。即`get`请求
