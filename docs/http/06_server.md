# 服务器

## 虚拟主机

单个服务器可以用虚拟主机，托管不同的域名

这时候通过 DNS 解析域名，两个域名指向的 IP 都是这个服务器

因此发送请求的时候要在首部通过 Host 完整地指定主机或者域名的 URI

## 数据转发

分三类：代理、网关、隧道

### 代理

服务端和客户端的中间人，接收客户端的请求转发给服务器，接收服务端的响应转发给客户端

不会改变请求的 URI

代理根据使用方法，大致分成两种：缓存和修改报文

- 缓存代理：将资源事先存在代理的服务器上，收到相同的资源时，不再从服务器获取，直接返回

- 透明代理：不对报文做任何加工。否则是非透明代理

比如有多台服务器都作为代理，每个代理都会在首部加入 Via 字段用来标记经过的主机

#### 缓存

缓存具有有效期

代理服务器会去服务器确认资源的有效期。如果失效了，再次获取新资源

客户端也有缓存：如果有效，不再向服务器请求。有效期过了会向服务器确认确认有效性。如果失效了重新请求

### 网关

一个服务器。用来转发给其他服务器

类似代理，不过这个服务器可以不进行 HTTP 协议的服务，进行一些加密处理

### 隧道

隧道本身不会处理 HTTP 请求，只是一条线路，确保安全性。

比如可以用 SSL 等进行加密
