# HTTP/2

参考[HTTP2 详解](https://juejin.im/post/5b88a4f56fb9a01a0b31a67e)

## HTTP/1.1 问题

1. 连接数限制：对于**同一个域名**的请求，浏览器同时只能创建 6~8 个 TCP 连接。  
   解决方案是域名分片: 请求资源使用不同的域名，比如 CDN 或者二级域名  
   缺点是创建不同的域名意味着各个请求都要从 DNS 解析开始、然后三次握手等等走一个完整的流程
2. 同一个 TCP 阻塞：一个 TCP 连接一次只能处理一个请求，如果该请求没响应，基于该连接的后续请求都会受阻
   解决方案是管线化(pipelining)。管线化要求客户端和服务器（包括代理服务器）都支持该设置
3. 请求头 Header 内容较多的时候也无法优化
4. 为了优化，需要减少请求数，常见的优化手段比如合并文件、雪碧图。这也导致了单个文件会比较大

## HTTP2 优势

- HTTP2 支持二进制传送（实现方便且健壮），HTTP1.x 是字符串传送
  HTTP2 中帧(frame)是数据传输的最小单位
- 支持多路复用：
  每个请求看做一个流，每个流有自己的唯一值可识别。可以让不同的流交错地发送，这样就不会阻塞
  那么对于同一域名只需要创建一个连接
- 采用 HPACK 压缩算法压缩头部，减小了传输的体积
- 支持服务端推送，即主动向客户端推送内容
