<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>变量和作用域 | fe-notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/fe-notes/favicon.ico">
    <meta name="description" content="个人前端笔记">
    
    <link rel="preload" href="/fe-notes/assets/css/0.styles.9dfc6ff8.css" as="style"><link rel="preload" href="/fe-notes/assets/js/app.3a168dfd.js" as="script"><link rel="preload" href="/fe-notes/assets/js/2.c34af4f1.js" as="script"><link rel="preload" href="/fe-notes/assets/js/1.4e3eb9de.js" as="script"><link rel="preload" href="/fe-notes/assets/js/19.d89d2c3c.js" as="script"><link rel="prefetch" href="/fe-notes/assets/js/10.d7790d7b.js"><link rel="prefetch" href="/fe-notes/assets/js/100.1d955b8c.js"><link rel="prefetch" href="/fe-notes/assets/js/101.9d24706c.js"><link rel="prefetch" href="/fe-notes/assets/js/102.2cddc8f3.js"><link rel="prefetch" href="/fe-notes/assets/js/103.31fd48a8.js"><link rel="prefetch" href="/fe-notes/assets/js/104.710bf344.js"><link rel="prefetch" href="/fe-notes/assets/js/105.5969f92a.js"><link rel="prefetch" href="/fe-notes/assets/js/106.5fe4dac3.js"><link rel="prefetch" href="/fe-notes/assets/js/107.cade6010.js"><link rel="prefetch" href="/fe-notes/assets/js/108.4906eb25.js"><link rel="prefetch" href="/fe-notes/assets/js/109.a0b391be.js"><link rel="prefetch" href="/fe-notes/assets/js/11.43eb9996.js"><link rel="prefetch" href="/fe-notes/assets/js/110.8c843cf7.js"><link rel="prefetch" href="/fe-notes/assets/js/111.81af13b5.js"><link rel="prefetch" href="/fe-notes/assets/js/112.eb75052c.js"><link rel="prefetch" href="/fe-notes/assets/js/113.d0aecf94.js"><link rel="prefetch" href="/fe-notes/assets/js/114.dc75fd2f.js"><link rel="prefetch" href="/fe-notes/assets/js/115.36915f02.js"><link rel="prefetch" href="/fe-notes/assets/js/116.cbc26f91.js"><link rel="prefetch" href="/fe-notes/assets/js/117.8e77424c.js"><link rel="prefetch" href="/fe-notes/assets/js/118.b167f107.js"><link rel="prefetch" href="/fe-notes/assets/js/119.0a10acf9.js"><link rel="prefetch" href="/fe-notes/assets/js/12.0ec02ddd.js"><link rel="prefetch" href="/fe-notes/assets/js/120.eb0aab57.js"><link rel="prefetch" href="/fe-notes/assets/js/121.3c95a197.js"><link rel="prefetch" href="/fe-notes/assets/js/122.32a6f602.js"><link rel="prefetch" href="/fe-notes/assets/js/123.a2b46063.js"><link rel="prefetch" href="/fe-notes/assets/js/124.099e5955.js"><link rel="prefetch" href="/fe-notes/assets/js/125.22cc3d5c.js"><link rel="prefetch" href="/fe-notes/assets/js/126.e3594885.js"><link rel="prefetch" href="/fe-notes/assets/js/127.c6f10455.js"><link rel="prefetch" href="/fe-notes/assets/js/128.ce24aecc.js"><link rel="prefetch" href="/fe-notes/assets/js/129.fc3e5554.js"><link rel="prefetch" href="/fe-notes/assets/js/13.78152d0b.js"><link rel="prefetch" href="/fe-notes/assets/js/130.c5c3742c.js"><link rel="prefetch" href="/fe-notes/assets/js/131.7a360af2.js"><link rel="prefetch" href="/fe-notes/assets/js/132.9d4fe360.js"><link rel="prefetch" href="/fe-notes/assets/js/133.c463096e.js"><link rel="prefetch" href="/fe-notes/assets/js/134.e2b52323.js"><link rel="prefetch" href="/fe-notes/assets/js/135.bd6d20a6.js"><link rel="prefetch" href="/fe-notes/assets/js/136.872158e5.js"><link rel="prefetch" href="/fe-notes/assets/js/137.5b3a875b.js"><link rel="prefetch" href="/fe-notes/assets/js/138.7685ef53.js"><link rel="prefetch" href="/fe-notes/assets/js/139.c5bb726d.js"><link rel="prefetch" href="/fe-notes/assets/js/14.6a9ef67a.js"><link rel="prefetch" href="/fe-notes/assets/js/140.9dec21eb.js"><link rel="prefetch" href="/fe-notes/assets/js/141.f337e59f.js"><link rel="prefetch" href="/fe-notes/assets/js/142.2c46c119.js"><link rel="prefetch" href="/fe-notes/assets/js/143.fa39f9c3.js"><link rel="prefetch" href="/fe-notes/assets/js/144.1a3a6ecc.js"><link rel="prefetch" href="/fe-notes/assets/js/145.4bb9d8ab.js"><link rel="prefetch" href="/fe-notes/assets/js/146.feadf802.js"><link rel="prefetch" href="/fe-notes/assets/js/147.07092725.js"><link rel="prefetch" href="/fe-notes/assets/js/148.23197f81.js"><link rel="prefetch" href="/fe-notes/assets/js/149.f4ac5c5c.js"><link rel="prefetch" href="/fe-notes/assets/js/15.96c9bf57.js"><link rel="prefetch" href="/fe-notes/assets/js/150.06a0409e.js"><link rel="prefetch" href="/fe-notes/assets/js/151.9879c192.js"><link rel="prefetch" href="/fe-notes/assets/js/152.c0ab61ec.js"><link rel="prefetch" href="/fe-notes/assets/js/153.621611fb.js"><link rel="prefetch" href="/fe-notes/assets/js/154.7f7453d5.js"><link rel="prefetch" href="/fe-notes/assets/js/155.56e356d3.js"><link rel="prefetch" href="/fe-notes/assets/js/156.0d733aa0.js"><link rel="prefetch" href="/fe-notes/assets/js/157.d241e320.js"><link rel="prefetch" href="/fe-notes/assets/js/158.844d5b84.js"><link rel="prefetch" href="/fe-notes/assets/js/159.61ba14f0.js"><link rel="prefetch" href="/fe-notes/assets/js/16.a80ecebb.js"><link rel="prefetch" href="/fe-notes/assets/js/160.f986bb29.js"><link rel="prefetch" href="/fe-notes/assets/js/161.c4315e4c.js"><link rel="prefetch" href="/fe-notes/assets/js/162.e69545e8.js"><link rel="prefetch" href="/fe-notes/assets/js/163.7cf2fcf0.js"><link rel="prefetch" href="/fe-notes/assets/js/164.77a48e63.js"><link rel="prefetch" href="/fe-notes/assets/js/165.a0327df4.js"><link rel="prefetch" href="/fe-notes/assets/js/166.2e16f205.js"><link rel="prefetch" href="/fe-notes/assets/js/167.f1a6a09c.js"><link rel="prefetch" href="/fe-notes/assets/js/168.cc9b8512.js"><link rel="prefetch" href="/fe-notes/assets/js/169.86e0fc4a.js"><link rel="prefetch" href="/fe-notes/assets/js/17.7102de0b.js"><link rel="prefetch" href="/fe-notes/assets/js/170.4b2c626c.js"><link rel="prefetch" href="/fe-notes/assets/js/171.f26c3435.js"><link rel="prefetch" href="/fe-notes/assets/js/172.8376be78.js"><link rel="prefetch" href="/fe-notes/assets/js/173.1e31f20a.js"><link rel="prefetch" href="/fe-notes/assets/js/174.9281dfa6.js"><link rel="prefetch" href="/fe-notes/assets/js/175.a84992e1.js"><link rel="prefetch" href="/fe-notes/assets/js/176.7bba3bf4.js"><link rel="prefetch" href="/fe-notes/assets/js/177.46fddad0.js"><link rel="prefetch" href="/fe-notes/assets/js/178.ed7ceb77.js"><link rel="prefetch" href="/fe-notes/assets/js/179.3d3d643e.js"><link rel="prefetch" href="/fe-notes/assets/js/18.5d340b88.js"><link rel="prefetch" href="/fe-notes/assets/js/180.1696ffc1.js"><link rel="prefetch" href="/fe-notes/assets/js/181.0dfd8494.js"><link rel="prefetch" href="/fe-notes/assets/js/182.0a3093e6.js"><link rel="prefetch" href="/fe-notes/assets/js/183.942c5c6e.js"><link rel="prefetch" href="/fe-notes/assets/js/184.29420180.js"><link rel="prefetch" href="/fe-notes/assets/js/185.49767fd0.js"><link rel="prefetch" href="/fe-notes/assets/js/186.aa8b2ae5.js"><link rel="prefetch" href="/fe-notes/assets/js/187.a0eb883b.js"><link rel="prefetch" href="/fe-notes/assets/js/188.8cb11493.js"><link rel="prefetch" href="/fe-notes/assets/js/189.d36d2136.js"><link rel="prefetch" href="/fe-notes/assets/js/190.a68f68f2.js"><link rel="prefetch" href="/fe-notes/assets/js/191.0c7f2386.js"><link rel="prefetch" href="/fe-notes/assets/js/192.cefa25dc.js"><link rel="prefetch" href="/fe-notes/assets/js/193.9606090a.js"><link rel="prefetch" href="/fe-notes/assets/js/194.e54a0766.js"><link rel="prefetch" href="/fe-notes/assets/js/195.e7bb65d2.js"><link rel="prefetch" href="/fe-notes/assets/js/196.78ff12d4.js"><link rel="prefetch" href="/fe-notes/assets/js/197.6fc5eaa5.js"><link rel="prefetch" href="/fe-notes/assets/js/198.79a003b7.js"><link rel="prefetch" href="/fe-notes/assets/js/199.dc2426ef.js"><link rel="prefetch" href="/fe-notes/assets/js/20.f4c8ca34.js"><link rel="prefetch" href="/fe-notes/assets/js/200.b2c97b9f.js"><link rel="prefetch" href="/fe-notes/assets/js/201.ba237c96.js"><link rel="prefetch" href="/fe-notes/assets/js/202.eff59685.js"><link rel="prefetch" href="/fe-notes/assets/js/203.2bf94c82.js"><link rel="prefetch" href="/fe-notes/assets/js/204.9a6b12e1.js"><link rel="prefetch" href="/fe-notes/assets/js/205.98bdf8a6.js"><link rel="prefetch" href="/fe-notes/assets/js/206.4b5a5115.js"><link rel="prefetch" href="/fe-notes/assets/js/207.77825369.js"><link rel="prefetch" href="/fe-notes/assets/js/208.548a77d2.js"><link rel="prefetch" href="/fe-notes/assets/js/209.e286bf98.js"><link rel="prefetch" href="/fe-notes/assets/js/21.5bbaf191.js"><link rel="prefetch" href="/fe-notes/assets/js/210.4ff22200.js"><link rel="prefetch" href="/fe-notes/assets/js/211.87d3b9f8.js"><link rel="prefetch" href="/fe-notes/assets/js/212.4baf5fe5.js"><link rel="prefetch" href="/fe-notes/assets/js/213.3501d1a5.js"><link rel="prefetch" href="/fe-notes/assets/js/214.5a119be9.js"><link rel="prefetch" href="/fe-notes/assets/js/215.6422dca4.js"><link rel="prefetch" href="/fe-notes/assets/js/216.8c8f3a4b.js"><link rel="prefetch" href="/fe-notes/assets/js/217.ada49303.js"><link rel="prefetch" href="/fe-notes/assets/js/218.3f120dd4.js"><link rel="prefetch" href="/fe-notes/assets/js/219.616fc91d.js"><link rel="prefetch" href="/fe-notes/assets/js/22.83b320f6.js"><link rel="prefetch" href="/fe-notes/assets/js/220.93d0a052.js"><link rel="prefetch" href="/fe-notes/assets/js/221.51cf766b.js"><link rel="prefetch" href="/fe-notes/assets/js/222.e21e73c3.js"><link rel="prefetch" href="/fe-notes/assets/js/223.09fe9120.js"><link rel="prefetch" href="/fe-notes/assets/js/224.d3b8e804.js"><link rel="prefetch" href="/fe-notes/assets/js/225.a19e67ae.js"><link rel="prefetch" href="/fe-notes/assets/js/226.36a44120.js"><link rel="prefetch" href="/fe-notes/assets/js/227.b2c63337.js"><link rel="prefetch" href="/fe-notes/assets/js/228.0a3e57ef.js"><link rel="prefetch" href="/fe-notes/assets/js/229.4279d959.js"><link rel="prefetch" href="/fe-notes/assets/js/23.59831ed6.js"><link rel="prefetch" href="/fe-notes/assets/js/230.14340350.js"><link rel="prefetch" href="/fe-notes/assets/js/231.83eddc3c.js"><link rel="prefetch" href="/fe-notes/assets/js/232.53f8de83.js"><link rel="prefetch" href="/fe-notes/assets/js/233.03f38b0a.js"><link rel="prefetch" href="/fe-notes/assets/js/234.367e67a6.js"><link rel="prefetch" href="/fe-notes/assets/js/235.d7ac7ea1.js"><link rel="prefetch" href="/fe-notes/assets/js/236.e9d676aa.js"><link rel="prefetch" href="/fe-notes/assets/js/237.88d88d4f.js"><link rel="prefetch" href="/fe-notes/assets/js/238.be5d9976.js"><link rel="prefetch" href="/fe-notes/assets/js/239.10c47781.js"><link rel="prefetch" href="/fe-notes/assets/js/24.d171b1da.js"><link rel="prefetch" href="/fe-notes/assets/js/240.7f7e9057.js"><link rel="prefetch" href="/fe-notes/assets/js/241.521afa4f.js"><link rel="prefetch" href="/fe-notes/assets/js/242.06d6e1f2.js"><link rel="prefetch" href="/fe-notes/assets/js/243.fcbff541.js"><link rel="prefetch" href="/fe-notes/assets/js/244.e99cb2dd.js"><link rel="prefetch" href="/fe-notes/assets/js/245.04b2f65e.js"><link rel="prefetch" href="/fe-notes/assets/js/246.456fc3bb.js"><link rel="prefetch" href="/fe-notes/assets/js/247.b5d332b3.js"><link rel="prefetch" href="/fe-notes/assets/js/248.495feadb.js"><link rel="prefetch" href="/fe-notes/assets/js/249.d0880af5.js"><link rel="prefetch" href="/fe-notes/assets/js/25.f92c4de3.js"><link rel="prefetch" href="/fe-notes/assets/js/250.8bc64327.js"><link rel="prefetch" href="/fe-notes/assets/js/251.7b89b6ac.js"><link rel="prefetch" href="/fe-notes/assets/js/252.97c7df28.js"><link rel="prefetch" href="/fe-notes/assets/js/253.e20644d7.js"><link rel="prefetch" href="/fe-notes/assets/js/254.cc96b633.js"><link rel="prefetch" href="/fe-notes/assets/js/255.308b98f4.js"><link rel="prefetch" href="/fe-notes/assets/js/256.01ae4bda.js"><link rel="prefetch" href="/fe-notes/assets/js/257.77c761c3.js"><link rel="prefetch" href="/fe-notes/assets/js/258.c15465ff.js"><link rel="prefetch" href="/fe-notes/assets/js/259.2ea4e9ab.js"><link rel="prefetch" href="/fe-notes/assets/js/26.d2fda899.js"><link rel="prefetch" href="/fe-notes/assets/js/260.5ef72e6e.js"><link rel="prefetch" href="/fe-notes/assets/js/261.df9e83c0.js"><link rel="prefetch" href="/fe-notes/assets/js/262.9f93dcbe.js"><link rel="prefetch" href="/fe-notes/assets/js/263.c895b59f.js"><link rel="prefetch" href="/fe-notes/assets/js/264.d8f787f9.js"><link rel="prefetch" href="/fe-notes/assets/js/265.e3c0ad58.js"><link rel="prefetch" href="/fe-notes/assets/js/266.6dfa8dae.js"><link rel="prefetch" href="/fe-notes/assets/js/267.2b47ccf2.js"><link rel="prefetch" href="/fe-notes/assets/js/268.ac30a03c.js"><link rel="prefetch" href="/fe-notes/assets/js/269.59de5cc6.js"><link rel="prefetch" href="/fe-notes/assets/js/27.6f9f1e03.js"><link rel="prefetch" href="/fe-notes/assets/js/270.ff1af94e.js"><link rel="prefetch" href="/fe-notes/assets/js/271.7f7152b9.js"><link rel="prefetch" href="/fe-notes/assets/js/272.5a05bcd2.js"><link rel="prefetch" href="/fe-notes/assets/js/273.204eac02.js"><link rel="prefetch" href="/fe-notes/assets/js/274.c0757056.js"><link rel="prefetch" href="/fe-notes/assets/js/275.7292b33e.js"><link rel="prefetch" href="/fe-notes/assets/js/276.9009e9da.js"><link rel="prefetch" href="/fe-notes/assets/js/277.da98194e.js"><link rel="prefetch" href="/fe-notes/assets/js/278.3bb8658f.js"><link rel="prefetch" href="/fe-notes/assets/js/279.c6bcfee6.js"><link rel="prefetch" href="/fe-notes/assets/js/28.d9ce88ab.js"><link rel="prefetch" href="/fe-notes/assets/js/280.248894e0.js"><link rel="prefetch" href="/fe-notes/assets/js/281.15920b4e.js"><link rel="prefetch" href="/fe-notes/assets/js/282.b531ba4c.js"><link rel="prefetch" href="/fe-notes/assets/js/283.e121220c.js"><link rel="prefetch" href="/fe-notes/assets/js/284.1e0cb73a.js"><link rel="prefetch" href="/fe-notes/assets/js/285.0440eb1e.js"><link rel="prefetch" href="/fe-notes/assets/js/286.4a7e1a2f.js"><link rel="prefetch" href="/fe-notes/assets/js/287.29c4e416.js"><link rel="prefetch" href="/fe-notes/assets/js/288.1f60f880.js"><link rel="prefetch" href="/fe-notes/assets/js/289.fbac4928.js"><link rel="prefetch" href="/fe-notes/assets/js/29.f3537421.js"><link rel="prefetch" href="/fe-notes/assets/js/290.5d24e679.js"><link rel="prefetch" href="/fe-notes/assets/js/291.a0cb5378.js"><link rel="prefetch" href="/fe-notes/assets/js/292.c307b453.js"><link rel="prefetch" href="/fe-notes/assets/js/293.18448a41.js"><link rel="prefetch" href="/fe-notes/assets/js/294.500016fa.js"><link rel="prefetch" href="/fe-notes/assets/js/295.3fb59e7d.js"><link rel="prefetch" href="/fe-notes/assets/js/296.7e418486.js"><link rel="prefetch" href="/fe-notes/assets/js/297.82d7b094.js"><link rel="prefetch" href="/fe-notes/assets/js/298.72b92f13.js"><link rel="prefetch" href="/fe-notes/assets/js/299.ed068b58.js"><link rel="prefetch" href="/fe-notes/assets/js/3.5ca5fa31.js"><link rel="prefetch" href="/fe-notes/assets/js/30.790cbfec.js"><link rel="prefetch" href="/fe-notes/assets/js/300.decd1c50.js"><link rel="prefetch" href="/fe-notes/assets/js/301.ac6c64b3.js"><link rel="prefetch" href="/fe-notes/assets/js/302.2f655351.js"><link rel="prefetch" href="/fe-notes/assets/js/303.214297cf.js"><link rel="prefetch" href="/fe-notes/assets/js/304.c8cb3d25.js"><link rel="prefetch" href="/fe-notes/assets/js/305.490b0bf4.js"><link rel="prefetch" href="/fe-notes/assets/js/306.bf59d4e6.js"><link rel="prefetch" href="/fe-notes/assets/js/307.ed6d223a.js"><link rel="prefetch" href="/fe-notes/assets/js/308.199b4fa5.js"><link rel="prefetch" href="/fe-notes/assets/js/309.645fbe73.js"><link rel="prefetch" href="/fe-notes/assets/js/31.b4fd35fa.js"><link rel="prefetch" href="/fe-notes/assets/js/310.6e0d92ae.js"><link rel="prefetch" href="/fe-notes/assets/js/311.6e51f6a5.js"><link rel="prefetch" href="/fe-notes/assets/js/312.e4ea1a16.js"><link rel="prefetch" href="/fe-notes/assets/js/313.a01c6561.js"><link rel="prefetch" href="/fe-notes/assets/js/314.f728f9ce.js"><link rel="prefetch" href="/fe-notes/assets/js/32.be19715e.js"><link rel="prefetch" href="/fe-notes/assets/js/33.2f32c378.js"><link rel="prefetch" href="/fe-notes/assets/js/34.009bd566.js"><link rel="prefetch" href="/fe-notes/assets/js/35.5c78a91a.js"><link rel="prefetch" href="/fe-notes/assets/js/36.581317e2.js"><link rel="prefetch" href="/fe-notes/assets/js/37.812a4308.js"><link rel="prefetch" href="/fe-notes/assets/js/38.1daf6af2.js"><link rel="prefetch" href="/fe-notes/assets/js/39.09f1ff29.js"><link rel="prefetch" href="/fe-notes/assets/js/4.33a435b7.js"><link rel="prefetch" href="/fe-notes/assets/js/40.20f65c42.js"><link rel="prefetch" href="/fe-notes/assets/js/41.322bd69f.js"><link rel="prefetch" href="/fe-notes/assets/js/42.9c72ca98.js"><link rel="prefetch" href="/fe-notes/assets/js/43.be9ec593.js"><link rel="prefetch" href="/fe-notes/assets/js/44.5d8b8a00.js"><link rel="prefetch" href="/fe-notes/assets/js/45.696e9597.js"><link rel="prefetch" href="/fe-notes/assets/js/46.793b2e02.js"><link rel="prefetch" href="/fe-notes/assets/js/47.fde1af0c.js"><link rel="prefetch" href="/fe-notes/assets/js/48.344fd853.js"><link rel="prefetch" href="/fe-notes/assets/js/49.2cf00938.js"><link rel="prefetch" href="/fe-notes/assets/js/5.7702ef90.js"><link rel="prefetch" href="/fe-notes/assets/js/50.baeea84b.js"><link rel="prefetch" href="/fe-notes/assets/js/51.30cc959c.js"><link rel="prefetch" href="/fe-notes/assets/js/52.8854a312.js"><link rel="prefetch" href="/fe-notes/assets/js/53.ae8e1467.js"><link rel="prefetch" href="/fe-notes/assets/js/54.5e25191a.js"><link rel="prefetch" href="/fe-notes/assets/js/55.47fc6868.js"><link rel="prefetch" href="/fe-notes/assets/js/56.b128d2d2.js"><link rel="prefetch" href="/fe-notes/assets/js/57.c82eb695.js"><link rel="prefetch" href="/fe-notes/assets/js/58.754ea6d5.js"><link rel="prefetch" href="/fe-notes/assets/js/59.8aac596b.js"><link rel="prefetch" href="/fe-notes/assets/js/6.5e57a940.js"><link rel="prefetch" href="/fe-notes/assets/js/60.81a67502.js"><link rel="prefetch" href="/fe-notes/assets/js/61.ac2837dd.js"><link rel="prefetch" href="/fe-notes/assets/js/62.e07c5ccb.js"><link rel="prefetch" href="/fe-notes/assets/js/63.29c0768c.js"><link rel="prefetch" href="/fe-notes/assets/js/64.04780b9d.js"><link rel="prefetch" href="/fe-notes/assets/js/65.0e71cdd9.js"><link rel="prefetch" href="/fe-notes/assets/js/66.0da8e639.js"><link rel="prefetch" href="/fe-notes/assets/js/67.753b9757.js"><link rel="prefetch" href="/fe-notes/assets/js/68.65544092.js"><link rel="prefetch" href="/fe-notes/assets/js/69.7d1c774a.js"><link rel="prefetch" href="/fe-notes/assets/js/7.527996d3.js"><link rel="prefetch" href="/fe-notes/assets/js/70.e098ec13.js"><link rel="prefetch" href="/fe-notes/assets/js/71.7dac9581.js"><link rel="prefetch" href="/fe-notes/assets/js/72.7b1ea4e0.js"><link rel="prefetch" href="/fe-notes/assets/js/73.7a264496.js"><link rel="prefetch" href="/fe-notes/assets/js/74.4a29c8dc.js"><link rel="prefetch" href="/fe-notes/assets/js/75.4a2b29b4.js"><link rel="prefetch" href="/fe-notes/assets/js/76.030d5bb9.js"><link rel="prefetch" href="/fe-notes/assets/js/77.e69f2a68.js"><link rel="prefetch" href="/fe-notes/assets/js/78.5c815799.js"><link rel="prefetch" href="/fe-notes/assets/js/79.89a07250.js"><link rel="prefetch" href="/fe-notes/assets/js/80.2965b576.js"><link rel="prefetch" href="/fe-notes/assets/js/81.8e11b1c2.js"><link rel="prefetch" href="/fe-notes/assets/js/82.1f18bd60.js"><link rel="prefetch" href="/fe-notes/assets/js/83.ee033c22.js"><link rel="prefetch" href="/fe-notes/assets/js/84.1f8cdfc7.js"><link rel="prefetch" href="/fe-notes/assets/js/85.a12fff11.js"><link rel="prefetch" href="/fe-notes/assets/js/86.99b7434c.js"><link rel="prefetch" href="/fe-notes/assets/js/87.5d460eff.js"><link rel="prefetch" href="/fe-notes/assets/js/88.88b923f7.js"><link rel="prefetch" href="/fe-notes/assets/js/89.1a38fcee.js"><link rel="prefetch" href="/fe-notes/assets/js/90.d59147ab.js"><link rel="prefetch" href="/fe-notes/assets/js/91.ad2cc9ae.js"><link rel="prefetch" href="/fe-notes/assets/js/92.341adf0b.js"><link rel="prefetch" href="/fe-notes/assets/js/93.f36b6992.js"><link rel="prefetch" href="/fe-notes/assets/js/94.848acf99.js"><link rel="prefetch" href="/fe-notes/assets/js/95.667d4de6.js"><link rel="prefetch" href="/fe-notes/assets/js/96.db4750cb.js"><link rel="prefetch" href="/fe-notes/assets/js/97.9176576e.js"><link rel="prefetch" href="/fe-notes/assets/js/98.92a31692.js"><link rel="prefetch" href="/fe-notes/assets/js/99.9d82da57.js"><link rel="prefetch" href="/fe-notes/assets/js/vendors~docsearch.bcd2b443.js">
    <link rel="stylesheet" href="/fe-notes/assets/css/0.styles.9dfc6ff8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-notes/" class="home-link router-link-active"><!----> <span class="site-name">fe-notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/css/" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/javascript/" class="nav-link router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/fe-notes/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/vue/" class="nav-link">
  Vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vue-router/" class="nav-link">
  Vue Router
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vuex/" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vue-3.x/" class="nav-link">
  Vue3.x
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/transition/" class="nav-link">
  Transition
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/react-router/" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/nextjs/" class="nav-link">
  Next
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/redux/" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/jest/" class="nav-link">
  Jest
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/testing-library/" class="nav-link">
  Testing Library
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/lint/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJS" class="mobile-dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/yarn/" class="nav-link">
  Yarn
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/electron/" class="nav-link">
  Electron
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机通识" class="dropdown-title"><span class="title">计算机通识</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机通识" class="mobile-dropdown-title"><span class="title">计算机通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/distilled/" class="nav-link">
  《计算机科学精粹》
</a></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/algorithm/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/fe-notes/leetcode/" class="nav-link">
  LeetCode
</a></li></ul></li><li class="dropdown-item"><h4>
          网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/tcp/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/fe-notes/http/" class="nav-link">
  HTTP(S)
</a></li><li class="dropdown-subitem"><a href="/fe-notes/network/" class="nav-link">
  网络综合
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/fe-notes/docker/" class="nav-link">
  Docker
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/design/" class="nav-link">
  常见
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/handlebars/" class="nav-link">
  Handlebars
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/trick/" class="nav-link">
  踩坑
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/copywriting/" class="nav-link">
  文案排版
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/repository/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/license/" class="nav-link">
  协议
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/ps/" class="nav-link">
  Photoshop
</a></li></ul></div></div><div class="nav-item"><a href="https://forlornlily.github.io/server-notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  后端开发
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ForlornLily/fe-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/css/" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/javascript/" class="nav-link router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/fe-notes/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/vue/" class="nav-link">
  Vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vue-router/" class="nav-link">
  Vue Router
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vuex/" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/vue-3.x/" class="nav-link">
  Vue3.x
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/transition/" class="nav-link">
  Transition
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/react-router/" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/nextjs/" class="nav-link">
  Next
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/redux/" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/jest/" class="nav-link">
  Jest
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/testing-library/" class="nav-link">
  Testing Library
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/lint/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJS" class="mobile-dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/yarn/" class="nav-link">
  Yarn
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/electron/" class="nav-link">
  Electron
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机通识" class="dropdown-title"><span class="title">计算机通识</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机通识" class="mobile-dropdown-title"><span class="title">计算机通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/distilled/" class="nav-link">
  《计算机科学精粹》
</a></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/algorithm/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/fe-notes/leetcode/" class="nav-link">
  LeetCode
</a></li></ul></li><li class="dropdown-item"><h4>
          网络
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/tcp/" class="nav-link">
  TCP/IP
</a></li><li class="dropdown-subitem"><a href="/fe-notes/http/" class="nav-link">
  HTTP(S)
</a></li><li class="dropdown-subitem"><a href="/fe-notes/network/" class="nav-link">
  网络综合
</a></li></ul></li><li class="dropdown-item"><h4>
          操作系统
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/fe-notes/docker/" class="nav-link">
  Docker
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-notes/design/" class="nav-link">
  常见
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-notes/handlebars/" class="nav-link">
  Handlebars
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/trick/" class="nav-link">
  踩坑
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/copywriting/" class="nav-link">
  文案排版
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/repository/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/license/" class="nav-link">
  协议
</a></li><li class="dropdown-item"><!----> <a href="/fe-notes/ps/" class="nav-link">
  Photoshop
</a></li></ul></div></div><div class="nav-item"><a href="https://forlornlily.github.io/server-notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  后端开发
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ForlornLily/fe-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-notes/javascript/" aria-current="page" class="sidebar-link">概要</a></li><li><a href="/fe-notes/javascript/001_introduce.html" class="sidebar-link">简介</a></li><li><a href="/fe-notes/javascript/002_script.html" class="sidebar-link">HTML 内使用</a></li><li><a href="/fe-notes/javascript/003_syntax.html" class="sidebar-link">语法</a></li><li><a href="/fe-notes/javascript/004_datatype.html" class="sidebar-link">数据类型</a></li><li><a href="/fe-notes/javascript/005_primitive_types.html" class="sidebar-link">简单数据类型/基本类型</a></li><li><a href="/fe-notes/javascript/006_boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/fe-notes/javascript/007_number.html" class="sidebar-link">Number</a></li><li><a href="/fe-notes/javascript/008_string.html" class="sidebar-link">String</a></li><li><a href="/fe-notes/javascript/009_symbol.html" class="sidebar-link">Symbol</a></li><li><a href="/fe-notes/javascript/010_primitive_wrapper_types.html" class="sidebar-link">基本包装类型</a></li><li><a href="/fe-notes/javascript/012_complex_data.html" class="sidebar-link">复杂类型/引用类型</a></li><li><a href="/fe-notes/javascript/013_operator.html" class="sidebar-link">操作符</a></li><li><a href="/fe-notes/javascript/014_statement.html" class="sidebar-link">语句</a></li><li><a href="/fe-notes/javascript/019_transrule.html" class="sidebar-link">转换规则总结</a></li><li><a href="/fe-notes/javascript/020_scope.html" aria-current="page" class="active sidebar-link">变量和作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#词法作用域-lexical-scope" class="sidebar-link">词法作用域(lexical scope)</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#函数优先" class="sidebar-link">函数优先</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#函数表达式" class="sidebar-link">函数表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#iifes" class="sidebar-link">IIFEs</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#变量复制" class="sidebar-link">变量复制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#浅复制-深复制" class="sidebar-link">浅复制，深复制</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#浅复制" class="sidebar-link">浅复制</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#深拷贝" class="sidebar-link">深拷贝</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#参数传递" class="sidebar-link">参数传递</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#函数作用域" class="sidebar-link">函数作用域</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#执行上下文与作用域" class="sidebar-link">执行上下文与作用域</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#执行环境-execution-context" class="sidebar-link">执行环境(execution context)</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#作用域链" class="sidebar-link">作用域链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#创建规则" class="sidebar-link">创建规则</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#本质是栈" class="sidebar-link">本质是栈</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#变量对象" class="sidebar-link">变量对象</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#垃圾收集" class="sidebar-link">垃圾收集</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#闭包-closure" class="sidebar-link">闭包(closure)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#变量的生存周期" class="sidebar-link">变量的生存周期</a></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#按值传递" class="sidebar-link">按值传递</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-notes/javascript/020_scope.html#性能" class="sidebar-link">性能</a></li></ul></li><li><a href="/fe-notes/javascript/022_object.html" class="sidebar-link">引用类型细分</a></li><li><a href="/fe-notes/javascript/023_array.html" class="sidebar-link">Array</a></li><li><a href="/fe-notes/javascript/024_date.html" class="sidebar-link">Date</a></li><li><a href="/fe-notes/javascript/025_function.html" class="sidebar-link">Function</a></li><li><a href="/fe-notes/javascript/026_math.html" class="sidebar-link">Math</a></li><li><a href="/fe-notes/javascript/027_global.html" class="sidebar-link">Global</a></li><li><a href="/fe-notes/javascript/028_set.html" class="sidebar-link">Set</a></li><li><a href="/fe-notes/javascript/029_map.html" class="sidebar-link">Map</a></li><li><a href="/fe-notes/javascript/030_regexp.html" class="sidebar-link">RegExp</a></li><li><a href="/fe-notes/javascript/031_typed_array.html" class="sidebar-link">TypedArray</a></li><li><a href="/fe-notes/javascript/038_iterators.html" class="sidebar-link">迭代器和生成器</a></li><li><a href="/fe-notes/javascript/040_oop.html" class="sidebar-link">面向对象</a></li><li><a href="/fe-notes/javascript/045_proxy.html" class="sidebar-link">代理与反射</a></li><li><a href="/fe-notes/javascript/050_async.html" class="sidebar-link">单线程与异步编程</a></li><li><a href="/fe-notes/javascript/052_bom.html" class="sidebar-link">BOM</a></li><li><a href="/fe-notes/javascript/053_dom.html" class="sidebar-link">DOM</a></li><li><a href="/fe-notes/javascript/054_size.html" class="sidebar-link">尺寸</a></li><li><a href="/fe-notes/javascript/060_events.html" class="sidebar-link">事件</a></li><li><a href="/fe-notes/javascript/061_animation.html" class="sidebar-link">动画</a></li><li><a href="/fe-notes/javascript/062_html5.html" class="sidebar-link">HTML5 编程</a></li><li><a href="/fe-notes/javascript/063_error.html" class="sidebar-link">错误处理</a></li><li><a href="/fe-notes/javascript/065_json.html" class="sidebar-link">JSON</a></li><li><a href="/fe-notes/javascript/070_storage.html" class="sidebar-link">离线和存储</a></li><li><a href="/fe-notes/javascript/075_modules.html" class="sidebar-link">模块 modules</a></li><li><a href="/fe-notes/javascript/080_web_worker.html" class="sidebar-link">Web Worker</a></li><li><a href="/fe-notes/javascript/090_curry.html" class="sidebar-link">函数柯里化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="变量和作用域"><a href="#变量和作用域" class="header-anchor">#</a> 变量和作用域</h1> <h2 id="词法作用域-lexical-scope"><a href="#词法作用域-lexical-scope" class="header-anchor">#</a> 词法作用域(lexical scope)</h2> <p>函数的作用域在函数定义的时候就决定了。<br>
为了实现这种词法作用域，函数对象的内部状态不仅包含了代码逻辑，还包含了当前的<a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE">作用域链</a></p> <p>与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的</p> <h2 id="函数优先"><a href="#函数优先" class="header-anchor">#</a> 函数优先</h2> <p>函数声明是在普通变量之前被提升的（仅针对 var，const 和 let 以及 class 因为暂时性死区 会直接报错）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">var</span> foo<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
</code></pre></div><p>如果变量被赋值，那赋值会覆盖掉声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//TypeError: test is not a function</span>
</code></pre></div><h2 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h2> <ul><li><p>以<code>function</code>开头的是函数声明，必须要给函数名</p></li> <li><p>否则就是函数表达式，可以不写函数名</p></li></ul> <p><code>(function foo(){ .. })</code> 作为一个表达式意味着标识符 foo 仅能在<code>..</code>
代表的作用域中被找到，而不是在外部作用域中。将名称 foo
隐藏在它自己内部意味着它不会没必要地污染外围作用域</p> <p>下面的函数会报错。表达式的名称标识符在外围作用域中也是不可用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//报错， ReferenceError</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//还是报错， ReferenceError</span>
</code></pre></div><h3 id="iifes"><a href="#iifes" class="header-anchor">#</a> IIFEs</h3> <p>immediately-invoked function expressions: 立即调用函数表达式</p> <p>最常见的形式是一个匿名函数表达式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="写法"><a href="#写法" class="header-anchor">#</a> 写法</h4> <ul><li><p>第一部分是包围在圆括号运算符()里的一个匿名函数，这个匿名函数拥有独立的词法作用域。这不仅避免了外界访问此
IIFE 中的变量，而且又不会污染全局作用域。</p></li> <li><p>第二部分再一次使用 () 创建了一个立即执行函数表达式，JavaScript
引擎到此将直接执行函数。()可以传参给第一部分</p></li></ul> <p><code>(function(){/*函数体*/})();</code>与<code>(function(){/*函数体*/}());</code>都可以</p> <p>箭头函数只能<code>(() =&gt; {/*函数体*/})();</code></p> <h4 id="传入参数"><a href="#传入参数" class="header-anchor">#</a> 传入参数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token constant">IIFE</span><span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span> param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//传入window对象，命名为global</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>global<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  params <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> params<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ReferenceError: Cannot access 'params' before initialization</span>
</code></pre></div><h2 id="变量复制"><a href="#变量复制" class="header-anchor">#</a> 变量复制</h2> <ul><li>简单数据类型：在变量对象上建一个新值，并把值复制，分配到新变量上</li></ul> <p><img src="/fe-notes/assets/img/6f8b6e725e20c284ec4464624acefc69.6f8b6e72.png" alt=""></p> <ul><li>引用类型：引用类型的值是保存在内存中的对象。JS 不允许直接访问内存，操作的是对象的引用，而不是实际对象的值</li></ul> <p><code>const a = []</code></p> <p>假设<code>[]</code>所在的地址是<code>#001</code>, 那么 a 存储的是<code>#001</code>这个地址，地址指向的值是<code>[]</code></p> <p>const b = a</p> <p>此时 b 复制的是地址<code>#001</code></p> <p><img src="/fe-notes/assets/img/e2e9e41f17229e2466f73a3cf022cabb.e2e9e41f.png" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
  person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;yyy&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'yyy', age: 30}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{name: 'xxx', age: 26}</span>
</code></pre></div><p><img src="/fe-notes/assets/img/ff3d7e13ddcf58cc80688cde4a5485c1.ff3d7e13.png" alt="https://user-gold-cdn.xitu.io/2018/11/14/16712ce155afef8c?imageslim"></p> <h3 id="浅复制-深复制"><a href="#浅复制-深复制" class="header-anchor">#</a> 浅复制，深复制</h3> <p><a href="https://github.com/wengjq/Blog/issues/3" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>值类型：浅拷贝和深拷贝都是互不影响的；</p> <p>引用类型：浅复制是对象地址的复制，并没有开辟新的栈，也就是复制的结果是两个对象指向同一个地址，修改其中一个对象的属性，则另一个对象的属性也会改变。</p> <p>而深复制则是开辟新的栈，两个对象对应两个不同的地址，修改一个对象的属性，不会改变另一个对象的属性。</p> <p>比如 jQuery.extend()</p> <p><img src="/fe-notes/assets/img/71383e411e0a3116f0ec5a887786945d.71383e41.png" alt=""></p> <h3 id="浅复制"><a href="#浅复制" class="header-anchor">#</a> 浅复制</h3> <ul><li><a href="/fe-notes/javascript/014_statement.html#for-in">for...in</a></li> <li>Object.assign</li> <li>展开运算符</li></ul> <h4 id="object-assign"><a href="#object-assign" class="header-anchor">#</a> Object.assign()</h4> <p>不包括<code>prototype</code>上的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> test<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: '1'}</span>
</code></pre></div><h4 id="展开运算符"><a href="#展开运算符" class="header-anchor">#</a> 展开运算符</h4> <p>不包括<code>prototype</code>上的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>test <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{a: '1'}</span>
</code></pre></div><h4 id="slice-和-concat"><a href="#slice-和-concat" class="header-anchor">#</a> slice 和 concat</h4> <p>数组专用</p> <h3 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h3> <h4 id="json-parse-和-stringify"><a href="#json-parse-和-stringify" class="header-anchor">#</a> JSON.parse 和 stringify</h4> <p>能够处理 JSON 格式能表示的所有数据类型。性能最高</p> <p>缺点见<a href="/fe-notes/javascript/012_complex_data.html#限制">JSON</a></p> <h4 id="手写"><a href="#手写" class="header-anchor">#</a> 手写</h4> <p>完整实现可以参考<a href="https://github.com/lodash/lodash" target="_blank" rel="noopener noreferrer">loadhash.cloneDeep<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，loadhash 也不支持复制 <code>Proxy</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> deepCopy <span class="token operator">=</span> <span class="token punctuation">{</span>
  types<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;Number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;String&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Boolean&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Null&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Undefined&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Symbol&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Array&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Function&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Date&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RegExp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Set&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Map&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BigInt&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//Object.prototype.toString返回的所有类型</span>
  <span class="token function">type</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">createType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> types <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>types<span class="token punctuation">;</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> types<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;is&quot;</span> <span class="token operator">+</span> types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>elem<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">==</span> types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果还没有调用过createType</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Function</span></span><span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> target<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      value<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//避免循环引用</span>
        <span class="token comment">/*  例如
         var obj = {
           value: {}
         };
         obj.value.value = obj; */</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Function</span></span><span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>不考虑 proxy 的 ES6 版本</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> CloneType <span class="token punctuation">{</span>
  <span class="token comment">/** 基本类型 */</span>
  <span class="token constant">PRIMITIVE</span><span class="token punctuation">,</span>
  <span class="token comment">/** null */</span>
  <span class="token constant">NULL</span><span class="token punctuation">,</span>
  <span class="token comment">/** 函数 */</span>
  <span class="token constant">FUNCTION</span><span class="token punctuation">,</span>
  <span class="token comment">/** 数组 */</span>
  <span class="token constant">ARRAY</span><span class="token punctuation">,</span>
  <span class="token comment">/** 普通对象 */</span>
  <span class="token constant">OBJECT</span><span class="token punctuation">,</span>
  <span class="token comment">/** 非普通对象，比如 Date */</span>
  <span class="token constant">UNKNOWN</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">/** 基本类型，不含 null */</span>
<span class="token keyword">const</span> <span class="token constant">PRIMITIVE_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;bigint&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;symbol&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getToStringType</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isNormalObjectType</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getToStringType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result <span class="token operator">===</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 获取需要特殊处理的类型
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> CloneType <span class="token punctuation">{</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> target<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">PRIMITIVE_TYPE</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> CloneType<span class="token punctuation">.</span><span class="token constant">PRIMITIVE</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> CloneType<span class="token punctuation">.</span><span class="token constant">FUNCTION</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> CloneType<span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> CloneType<span class="token punctuation">.</span><span class="token constant">ARRAY</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">isNormalObjectType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> CloneType<span class="token punctuation">.</span><span class="token constant">OBJECT</span> <span class="token operator">:</span> CloneType<span class="token punctuation">.</span><span class="token constant">UNKNOWN</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createFunction</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Function</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Function</span></span><span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> target<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copyDeep</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//避免循环引用</span>
  <span class="token comment">/*  例如
  var obj = {
    value: {}
  };
  obj.value.value = obj; */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>CloneType<span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">,</span> CloneType<span class="token punctuation">.</span><span class="token constant">PRIMITIVE</span><span class="token punctuation">,</span> CloneType<span class="token punctuation">.</span><span class="token constant">UNKNOWN</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> CloneType<span class="token punctuation">.</span><span class="token constant">FUNCTION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> functionResult <span class="token operator">=</span> <span class="token function">createFunction</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> functionResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> functionResult<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> result<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> type <span class="token operator">===</span> CloneType<span class="token punctuation">.</span><span class="token constant">ARRAY</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 递归不考虑继承</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">copyDeep</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> cache<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="参数传递"><a href="#参数传递" class="header-anchor">#</a> 参数传递</h2> <p>按值传递：参数是一个临时变量，调用函数时的变量，被复制到了这个临时变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// obj 是个临时变量</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">;</span>
  obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Greg&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">setName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Nicholas</span>
</code></pre></div><h2 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h2> <p>在函数体的任意地方用 var 声明的变量，在这个函数以及内部嵌套的其他函数，都是有定义的（不代表始终有值）。</p> <p>但只有执行到赋值语句时，才会有值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
  <span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hello&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>也就是<a href="/fe-notes/javascript/003_syntax.html#var-变量提升">变量提升</a></p> <h2 id="执行上下文与作用域"><a href="#执行上下文与作用域" class="header-anchor">#</a> 执行上下文与作用域</h2> <p>概述：<br>
变量或函数的上下文决定了它们可以访问哪些数据<br>
每个上下文都有一个关联的变量对象（variable object），而这个上下文中定义的所有变量和函数都存在于这个对象上。<br>
上下文在代码执行后正常应该被销毁<br>
每个函数被调用时都有自己的上下文：执行时函数的上下文会被推到一个栈里；执行结束后出栈，将控制权返回给之前的执行上下文</p> <h2 id="执行环境-execution-context"><a href="#执行环境-execution-context" class="header-anchor">#</a> 执行环境(execution context)</h2> <p>变量或者函数的执行环境定义了他们有权访问的数据。每个环境都有一个对应的变量对象（variable
object），环境中定义的所有变量和函数都会存在这个 VO 里。JS 解释器会在处理数据的时候使用 VO</p> <p>最外围的是全局全局执行环境，浏览器内就是 window 对象。也就是所有全局变量和函数都是做为 window 的属性和方法创建的</p> <p>执行函数的时候会创建执行环境。环境都是独一无二的。</p> <p>同一个函数调用多次，就会创建多个执行环境。函数执行完毕后被销毁</p> <p>每个执行环境内都有作用域链。保证有权访问的变量和函数有序</p> <p>作用域链实际上是保存变量对象的指针，只是引用但不保存实际 VO</p> <p>当执行环境被创建时，按照出现在函数中的顺序，创建了一个活动对象（activation
object）</p> <p>活动对象包括函数内部的所有局部变量, this, arguments</p> <p>执行环境被销毁，那么活动对象也被销毁（闭包不会）</p> <p><img src="/fe-notes/assets/img/b2cfc721567f4a9e42673c5f2816928f.b2cfc721.png" alt=""></p> <p>函数执行的时候，每遇到一个变量，就会先搜索活动对象。没有则寻找下一个，直到找到。如果没找到，被标记成 undefined</p> <p>变量所在的位置越深，读写速度越慢。</p> <h2 id="作用域链"><a href="#作用域链" class="header-anchor">#</a> 作用域链</h2> <p>每一段 JS 代码（全局代码或者函数）都有与之相关的作用域链(scope chain)，把作用域看做一个链表对象<br>
这个对象定义了这段代码&quot;作用域&quot;中的变量</p> <p>当 JS 要查找某个变量 x(这个过程也就是<code>变量解析</code>(variable resolution))，会从链的第一个对象开始查找;<br>
有名为 x 的属性，则返回对应的值;<br>
没有就继续往下，如果到最后都没有，就认为变量不存在，抛出一个<code>ReferenceError</code></p> <ul><li>在最顶层代码（也就是不包含任何函数定义的代码），作用域链由一个全局对象组成;</li> <li>在不包含嵌套的函数内，作用域是两个对象组成，第一个是定义函数参数和局部变量的对象，第二个是全局对象;</li> <li>包含嵌套的函数内，作用域链至少是三个对象</li></ul> <h3 id="创建规则"><a href="#创建规则" class="header-anchor">#</a> 创建规则</h3> <p>定义一个函数时，会保存一个作用域链 A。<br> <strong>调用</strong>这个函数的时候，会创建一个新的对象保存局部变量，同时把这个对象保存到作用域链 A 上<br>
对于嵌套函数来说，每次调用外部函数的时候，作用域链都是不同的</p> <h3 id="本质是栈"><a href="#本质是栈" class="header-anchor">#</a> 本质是栈</h3> <p><a href="https://github.com/mqyqingfeng/Blog/issues/4" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
后进先出</p> <p>JS 引擎通过栈的结构去处理上下文</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">printSquare</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">printSquare</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/jpeg;base64,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" alt="">
假设全局代码叫 globalContext，执行函数的时候创建的执行上下文叫 ECStack</p> <p>那么执行 fun1 的时候，最开始解释的的肯定是全局代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fun3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>执行 fun1 的时候其实</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 伪代码</span>
<span class="token comment">// fun1()</span>
ECStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>fun1<span class="token operator">&gt;</span> functionContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// fun1中竟然调用了fun2，还要创建fun2的执行上下文</span>
ECStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>fun2<span class="token operator">&gt;</span> functionContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 擦，fun2还调用了fun3！</span>
ECStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>fun3<span class="token operator">&gt;</span> functionContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// fun3执行完毕</span>
ECStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// fun2执行完毕</span>
ECStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// fun1执行完毕</span>
ECStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// javascript接着执行下面的代码，但是ECStack底层永远有个globalContext</span>
</code></pre></div><h3 id="变量对象"><a href="#变量对象" class="header-anchor">#</a> 变量对象</h3> <p>创建执行上下文之后会产生三个重要属性：</p> <ul><li><p>变量对象(Variable Object, VO)</p></li> <li><p>作用域链</p></li> <li><p>this</p></li></ul> <p>变量对象存储了执行上下文里面定义的变量和函数声明</p> <ul><li><p>未进入执行阶段之前，变量对象(VO)中的属性都不能访问</p></li> <li><p>但是进入执行阶段之后，变量对象(VO)转变为了活动对象(AO)，里面的属性都能被访问了</p></li></ul> <p>此时的 AO 包括形参、函数声明和变量声明。并且函数声明优先级大于变量声明，函数内容会替换掉对应的变量（包括形参）</p> <p><img src="data:image/png;base64,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" alt=""></p> <ul><li>然后开始进行执行阶段的操作。</li></ul> <p>执行阶段，会顺序执行代码，根据代码，修改变量对象的值</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>它们其实都是同一个对象，只是处于执行上下文的不同生命周期。</p> <p>AO = VO + function parameters + arguments</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">var</span> <span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>进入 foo 的时候</p> <div class="language- extra-class"><pre class="language-text"><code>AO = {
    arguments: {
        0: 1,
        length: 1
    },
    a: 1,
    b: undefined,
    c: reference to function c(){},
    d: undefined
}
</code></pre></div><p>执行的时候</p> <div class="language- extra-class"><pre class="language-text"><code>AO = {
    arguments: {
        0: 1,
        length: 1
    },
    a: 1,
    b: 3,
    c: reference to function c(){},
    d: reference to FunctionExpression &quot;d&quot;
}
</code></pre></div><h3 id="垃圾收集"><a href="#垃圾收集" class="header-anchor">#</a> 垃圾收集</h3> <p>按照固定的时间间隔，周期地执行垃圾收集。</p> <p>主要就是找出不再继续使用的变量，打上标记，然后释放占用的内存</p> <h4 id="标记清除"><a href="#标记清除" class="header-anchor">#</a> 标记清除</h4> <p>变量进入环境的时候，标记为“进入环境”。离开环境后标记为“离开环境”</p> <p>垃圾回收算法主要依赖于引用的概念</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>引用</p> <p>一个对象如果有访问另一个对象的权限，叫做一个对象引用另一个对象。比如一个 Javascript 对象具有对它原型的引用（隐式引用）和对它属性的引用（显式引用）。</p></div> <p>垃圾收集器会在运行的时候给所有变量加上标记。</p> <p>其中全局变量，闭包以及全局变量引用的对象会被去除</p> <p>那么剩下被标记的变量就是要被删除的。</p> <p>最后垃圾收集器完成内存清除工作，销毁被标记的值并进行内存释放</p> <h4 id="代码技巧"><a href="#代码技巧" class="header-anchor">#</a> 代码技巧</h4> <p>当不再使用函数或者变量时主动设置为 null。</p> <p>让值脱离执行环境，方便下次的垃圾回收</p> <h2 id="闭包-closure"><a href="#闭包-closure" class="header-anchor">#</a> 闭包(closure)</h2> <p>闭包是依赖于词法作用域编写代码而产生的结果</p> <p>闭包是一个函数，这个函数有权访问另一个函数作用域中的变量<br>
或者说自由变量：在函数中使用的，但既不是函数参数也不是函数的局部变量的变量<br>
或者说可以让外部作用域访问内部作用域的局部变量</p> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <ul><li><p>从理论角度：所有的函数。因为它们都在创建的时候就将上层上下文的数据保存起来了。哪怕是简单的全局变量也是如此，因为函数中访问全局变量就相当于是在访问自由变量，这个时候使用最外层的作用域。</p></li> <li><p>从实践角度：以下函数才算是闭包：</p> <ul><li><p>即使创建它的上下文已经销毁，它仍然存在（比如，内部函数从父函数中返回）</p></li> <li><p>在代码中引用了自由变量</p></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
<span class="token constant">A</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 
  结果
  class A {
    say() {
      console.log(A);
    };
  } 
*/</span>
</code></pre></div><h3 id="变量的生存周期"><a href="#变量的生存周期" class="header-anchor">#</a> 变量的生存周期</h3> <p>正常情况下，一个局部变量，当它所在的函数被调用后，就销毁了。<br>
但闭包会产生例外</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><p>上面的 fun 是一个匿名函数，可以访问 test() 被调用时产生的环境<br>
局部变量 <code>a</code> 一直在这个环境里面，为了保证可以被访问，局部变量就不会被销毁</p> <h3 id="按值传递"><a href="#按值传递" class="header-anchor">#</a> 按值传递</h3> <p>闭包保存的是整个变量对象，而不是单个变量</p> <p>for 循环里面的函数，作用域链保存的是 anno 的活动对象，都引用同一个 i</p> <p>当 anno 返回 arr 的时候，i 是 3</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">anno</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">anno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
</code></pre></div><p>如果 var 改为 let，那么就会输出对应的 0，1，2</p> <h2 id="性能"><a href="#性能" class="header-anchor">#</a> 性能</h2> <p>避免全局查找，尽可能用局部变量。</p> <p>用局部变量把全局存下来</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ForlornLily/fe-notes/edit/master/docs/javascript/020_scope.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/10/2023, 12:14:08 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe-notes/javascript/019_transrule.html" class="prev">
        转换规则总结
      </a></span> <span class="next"><a href="/fe-notes/javascript/022_object.html">
        引用类型细分
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fe-notes/assets/js/app.3a168dfd.js" defer></script><script src="/fe-notes/assets/js/2.c34af4f1.js" defer></script><script src="/fe-notes/assets/js/1.4e3eb9de.js" defer></script><script src="/fe-notes/assets/js/19.d89d2c3c.js" defer></script>
  </body>
</html>
