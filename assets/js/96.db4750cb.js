(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{494:function(t,s){t.exports="data:image/png;base64,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"},751:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"stream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stream"}},[t._v("#")]),t._v(" Stream")]),t._v(" "),s("p",[t._v("所有的流都是 EventEmitter 的实例"),s("br"),t._v("\n主要用于处理大文件"),s("br"),t._v("\nreadFile 和 writeFile 读写大文件时性能较差")]),t._v(" "),s("p",[t._v("改用流来进行分片，流通过管道(pipe)传输")]),t._v(" "),s("p",[t._v('比如 request 是 POST 形式的时候，on 监听"data"方法，解决网络流量')]),t._v(" "),s("p",[t._v("以下的 API(比如 on, write)只要是 Stream 对象都可以使用。")]),t._v(" "),s("p",[t._v("等价于")]),t._v(" "),s("p",[s("code",[t._v("req.pipe(res);")])]),t._v(" "),s("h2",{attrs:{id:"类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型"}},[t._v("#")]),t._v(" 类型")]),t._v(" "),s("ul",[s("li",[t._v("Writable - 可写入数据的流（例如 fs.createWriteStream()）。")]),t._v(" "),s("li",[t._v("Readable - 可读取数据的流（例如 fs.createReadStream()）。")]),t._v(" "),s("li",[t._v("Duplex - 可读又可写的流（例如 net.Socket）。")]),t._v(" "),s("li",[t._v("Transform - 在读写过程中可以修改或转换数据的 Duplex 流（例如 zlib.createDeflate()）")])]),t._v(" "),s("h2",{attrs:{id:"cmd-下显示输入的内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cmd-下显示输入的内容"}},[t._v("#")]),t._v(" cmd 下显示输入的内容")]),t._v(" "),s("p",[t._v("本质上是 linux 的概念，NodeJS 用自己的 API 进行了实现")]),t._v(" "),s("p",[t._v("std 就是 stand")]),t._v(" "),s("p",[t._v("标准的输入输出")]),t._v(" "),s("p",[s("code",[t._v("process.stdin.pipe(process.stdout);")])]),t._v(" "),s("p",[t._v('比如输入"hello"按 Enter，控制台输出"hello"')]),t._v(" "),s("p",[s("img",{attrs:{src:a(494),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"fs-模块操作-stream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fs-模块操作-stream"}},[t._v("#")]),t._v(" fs 模块操作 stream")]),t._v(" "),s("h3",{attrs:{id:"fs-createreadstream-filename-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fs-createreadstream-filename-options"}},[t._v("#")]),t._v(" fs.createReadStream(fileName, options)")]),t._v(" "),s("h3",{attrs:{id:"fs-createwritestream-path-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fs-createwritestream-path-options"}},[t._v("#")]),t._v(" fs.createWriteStream(path, options)")]),t._v(" "),s("p",[t._v("gmarket.txt 的内容被替换为 temp.css")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./temp.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writeTarget "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./gmarket.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writeTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"end"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read finished"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"write-chunk-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#write-chunk-callback"}},[t._v("#")]),t._v(" write(chunk, callback)")]),t._v(" "),s("p",[t._v("除了用 pipe 连接写入流，对象本身也可以调方法写入自定义的内容")]),t._v(" "),s("p",[t._v("写入完成后触发回调")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writeFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./temp.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwriteFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"complete"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"http-与-fs-结合使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-与-fs-结合使用"}},[t._v("#")]),t._v(" http 与 fs 结合使用")]),t._v(" "),s("p",[t._v("比如 http 的 request 发送的 GET 请求，需要读取某个文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhttp\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./temp.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      readFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"on-监听"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#on-监听"}},[t._v("#")]),t._v(" on 监听")]),t._v(" "),s("p",[t._v('Stream 对象可以通过监听"data"来展开每个流读取的内容, "end"表示读取完毕')]),t._v(" "),s("p",[t._v("用法和 request 的 on 一样")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("readFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"readline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#readline"}},[t._v("#")]),t._v(" readline")]),t._v(" "),s("p",[t._v("基于 stream。用来逐行读取 stream")]),t._v(" "),s("h3",{attrs:{id:"createinterface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createinterface"}},[t._v("#")]),t._v(" createInterface")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readline"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createInterface")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("input")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./temp.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"line"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("line")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("接收到：")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("line"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"on-监听事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#on-监听事件"}},[t._v("#")]),t._v(" on 监听事件")]),t._v(" "),s("h4",{attrs:{id:"line"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#line"}},[t._v("#")]),t._v(" line")]),t._v(" "),s("p",[t._v("收到行尾输入（\\n、 \\r 或 \\r\\n）时就会触发"),s("code",[t._v("line")]),t._v("事件")]),t._v(" "),s("h4",{attrs:{id:"close-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#close-事件"}},[t._v("#")]),t._v(" close 事件")]),t._v(" "),s("p",[t._v("所有行读取结束触发")])])}),[],!1,null,null,null);s.default=e.exports}}]);